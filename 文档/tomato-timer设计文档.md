# 1. 背景

调研了市面上主要的番茄钟软件，绝大部分都是以应用形式出现的，不方便在浏览器中直接使用。同时，以网页形式出现的也不方便使用，最好的形式肯定是插件。

但是插件中，绝大部分只有单独的番茄钟功能，缺少了任务记录功能，而且几乎所有软件都没有较为美观的统计功能。那这样怎么知道自己的付出呢？

Forest 就是一个很好的例子，它的功能简单到简陋，但就是好看而且有统计，就能有巨大的市场。

所以我的目标就是：

1. **插件形式**
2. **同时具有番茄钟和任务记录**
3. **统计功能**

# 2. 技术选型

前端技术肯定还是选择比较熟悉的，同时也比较新的技术栈：vue3 + vite + pinia + vue router 全家桶

后端方面，看看需不需要数据库，前面可以先拿indexDB顶一顶，后面可能还是要有数据库的，可以用mysql，或者看看狗家或者哪位能给个云数据库，给啥用啥

UI方面，这次想深度体验一下UnoCSS，看看相比TailwindCss开发体验提升大不大

预计应该会需要写拖拽、列表树结构这些功能，都尝试自己写

**开发流程应该会比较长，希望能作为一个练手的大项目，预计开发时间两个月**

# 3. 原型图

找了一份设计语言还不错的番茄钟应用的原型图，基本采用，部分稍微改改

这个UI主要是移动端的UI，基础组件可以参照，布局可能会稍微更改

> 移动端应用可以用uni-app简单封装实现一下，不过那是后话了

**时间统计功能这里是没有的，但是我肯定会实现**

## 3.1 登录

![登录页](D:\tomato-timer\文档\原型图\登录页.png)

## 3.2 扁平任务列表

![扁平列表页](D:\tomato-timer\文档\原型图\扁平列表页.png)

## 3.3 四象限任务列表

![四象限列表页](D:\tomato-timer\文档\原型图\四象限列表页.png)

## 3.4 番茄计时

![番茄计时页](D:\tomato-timer\文档\原型图\番茄计时页.png)

## 3.5 个人中心

![个人中心页](D:\tomato-timer\文档\原型图\个人中心页.png)

## 3.6 快捷创建

![快捷创建](D:\tomato-timer\文档\原型图\快捷创建.png)

## 3.7 额外功能

上面的原型图是一个非常简单的版本，我觉得至少还需要增加：

1. 项目
    - 即任务可以从属于某个项目，这个项目下面可以有多个任务
2. 统计
    - 需要有一个统计页面，统计各类信息
    - 比如完成任务数（分象限、分项目），总专注时间，专注天数（热力图）
3. 任务增强
    - 任务可以指定某一天的具体时间，并且提供提醒
    - 任务可以为重复任务，每天或者自定义重复规则进行重复

**上述的功能会在初始版本完成后逐步丰富完善**

# 4、 具体功能

## 4.1 登录

目前先不搞登录、账户相关的，信息就直接存储在浏览器的indexDB里面。虽然这样做有个问题：浏览器卸载了数据就清空了。但是要解决总归还是需要云数据库的，应该会比较复杂，以后再说

## 4.2 任务列表

首先要确定一下数据格式

|              | type    | value            |
| ------------ | ------- | ---------------- |
| **id**       | Number  | 唯一递增值，主键 |
| **date**     | Date    | YYYY/MM/DD       |
| **level**    | Number  | [1,2,3,4]        |
| **name**     | String  | 任意字符串       |
| **finished** | Boolean | [true, false]    |

这个数据在indexDB中存储，各个地方需要获取更新就直接反映在indexDB上吧，好像也不需要pinia？

> `let today = new Date().toLocaleString().split(' ')[0]`

操作的行为有

| 页面           | 操作字段        |
| -------------- | --------------- |
| 扁平任务列表   | finished        |
| 四象限任务列表 | level，finished |
| 快捷创建       | 全部            |

## 4.3 番茄计时

还是先确定数据格式

|              | type    | value                               |
| ------------ | ------- | ----------------------------------- |
| **id**       | Number  | 唯一递增值，主键                    |
| **date**     | Date    | YYYY/MM/DD                          |
| **setTime**  | Number  | 任意正整数，单位为分钟，为设定时间  |
| **finished** | Boolean | [true, false]，番茄钟可以没完成     |
| **realTime** | Number  | realTime <= setTime, 即真实完成时间 |
| **task**     | Number  | 任务id，实现绑定                    |

操作的肯定就在番茄计时页了，行为有以下几种

- 创建
    - 创建时绑定task，设置setTime，分配id和date
- 完成
    - 设置finished和realTime
- 放弃
    - 设置finished和realTime

## 4.4 统计

目前打算设计几个图表，然后设计一个年终总结h5页？

统计页给出每日每月每年三个tab

每日统计有：

- 今日专注时间
- 今日完成任务
- 今日相比昨日专注时间增加比例

每月统计有：

- 月历热力图，展示每日专注时间
- 每月分项目用时
- 本月相比上个月专注时间增加比例

**目前这一块还很不清楚，需要找找市面上做的比较好的软件学习以下，比如滴答清单之类的**